<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Architecture | @viotemplate/ts-monorepo</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://template.viotech.io//docs/Packages/server/architecture"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Architecture | @viotemplate/ts-monorepo"><meta data-react-helmet="true" name="description" content="Overview"><meta data-react-helmet="true" property="og:description" content="Overview"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://template.viotech.io//docs/Packages/server/architecture"><link data-react-helmet="true" rel="alternate" href="https://template.viotech.io//docs/Packages/server/architecture" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://template.viotech.io//docs/Packages/server/architecture" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.ebc47eef.css">
<link rel="preload" href="/assets/js/runtime~main.94560e49.js" as="script">
<link rel="preload" href="/assets/js/main.2e161683.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/viotech_logo_blue.svg" alt="Viotech&#x27;s logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/viotech_logo_blue.svg" alt="Viotech&#x27;s logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">viotech | @ts-monorepo</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/otaviotech/ts-monorepo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/design-docs/intro">Design Docs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Contributing/Tutorial">Contributing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/docs/Packages/server/tools">Packages</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/docs/Packages/server/tools">server</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Packages/server/tools">Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Packages/server/architecture">Architecture</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Architecture</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">â€‹</a></h2><p>It&#x27;s heavily inspired by Uncle Bob&#x27;s <code>Clean Architeture</code>.</p><p>So, if you haven&#x27;t read the book yet, here&#x27;s a recommendation.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="is-it-overkill">Is it overkill?<a class="hash-link" href="#is-it-overkill" title="Direct link to heading">â€‹</a></h3><p>The answer is: &quot;it dependends&quot;.</p><p>Maybe if you&#x27;re building a simple app, which won&#x27;t grow, or be coded by a large team, this is definetely an overkill.</p><p>But in the other hand, if you want to quickly bootstrap a project, with the right tools and a solid workflow, ready for scaling, you should consider this.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="why-is-it-an-overkill">Why is it an overkill?<a class="hash-link" href="#why-is-it-an-overkill" title="Direct link to heading">â€‹</a></h3><ol><li>Because your project will have a short lifecycle.</li><li>Because you won&#x27;t mantain your codebase for much longer.</li><li>You don&#x27;t care.</li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="why-is-it-not-an-overkill">Why is it NOT an overkill?<a class="hash-link" href="#why-is-it-not-an-overkill" title="Direct link to heading">â€‹</a></h3><ol><li>You get everything setup by the click of a button.</li><li>You have a battle-tested/optionated/solid architecture inspired project.</li><li>You have a large team and you don&#x27;t have time to make code reviews to check for syntax errors.</li><li>You want to build a long term / forever evolving project that doesn&#x27;t depend on implementations, so you can easily change libraries as time goes by. (Without having to re-write much code)</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="motivation">Motivation<a class="hash-link" href="#motivation" title="Direct link to heading">â€‹</a></h2><p>Let&#x27;s see why chose to use some tools.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="typescript">TypeScript<a class="hash-link" href="#typescript" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="is-it-necessary">Is it necessary?<a class="hash-link" href="#is-it-necessary" title="Direct link to heading">â€‹</a></h4><p>No. definetely not. But it has some pros that we should take in count.</p><p>Let&#x27;s suppose you have a large codebase.</p><ul><li>How easy is it to identify and use some business API?</li><li>How easy is it to detect syntax errors?</li><li>How easy is it to know what is an abstraction and what is an implementation?</li></ul><p>Static typechecking is very helpful when you don&#x27;t overuse it.</p><p><em>Tip</em>: Don&#x27;t forget to read our <code>style guide</code>, to understand how you should write TypeScript code in this project.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="folder-structure">Folder Structure<a class="hash-link" href="#folder-structure" title="Direct link to heading">â€‹</a></h2><p><img alt="Folder Structure" src="/assets/images/folder_structure-a22591effdb40cef16a4e4e88268867e.png"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="layers">Layers<a class="hash-link" href="#layers" title="Direct link to heading">â€‹</a></h2><p>This is a quick explanation of what each layer should care about.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="presentation-layer">Presentation layer<a class="hash-link" href="#presentation-layer" title="Direct link to heading">â€‹</a></h3><p>This is where we handle and deliver data.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="what-this-layer-should-do">What this layer should do?<a class="hash-link" href="#what-this-layer-should-do" title="Direct link to heading">â€‹</a></h4><p>Currently, it should:</p><ul><li>Validate (schema validate) an incoming request</li><li>Route the request to the right UseCase (business logic handler)</li><li>Handle Domain, Validation and Runtime errors and build an HTTP request. (E.g.: define what status code it should have)</li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="patterns-youll-find-here">Patterns you&#x27;ll find here:<a class="hash-link" href="#patterns-youll-find-here" title="Direct link to heading">â€‹</a></h4><ul><li>Controller</li><li>Factory</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="domain-layer">Domain layer<a class="hash-link" href="#domain-layer" title="Direct link to heading">â€‹</a></h3><p>This is where all of our business contracts live.</p><p>It should have only contracts(abstractions), not implementations.</p><p>Here you&#x27;ll find UseCases, Errors, Events.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="what-this-layer-should-do-1">What this layer should do?<a class="hash-link" href="#what-this-layer-should-do-1" title="Direct link to heading">â€‹</a></h4><p>This layer should scream, by itself, all the software do.
It should not implement any business logic, but instead, show exactly how the API should be.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="patterns-you-wil-find-here">Patterns you wil find here<a class="hash-link" href="#patterns-you-wil-find-here" title="Direct link to heading">â€‹</a></h4><p>None, this should NOT implement anything.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="data-layer">Data layer<a class="hash-link" href="#data-layer" title="Direct link to heading">â€‹</a></h3><p>This is the layer that implements our business logic. Yes, the ones defined by the Domain layer.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="what-this-layer-should-do-2">What this layer should do?<a class="hash-link" href="#what-this-layer-should-do-2" title="Direct link to heading">â€‹</a></h4><p>This layer should implement the UseCases, for example.</p><p>Also, it should define its own contracts. These contracts are not Business contracts, like the ones in the Domain layer. Instead, these are contracts the define how the data logic can be implemented.</p><p>You can think of it like the Service layer of the 3 Layer Architecture. (but be careful)</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="patterns-you-will-find-here">Patterns you will find here<a class="hash-link" href="#patterns-you-will-find-here" title="Direct link to heading">â€‹</a></h4><ul><li>Factory</li><li>Decorator</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="infra-layer">Infra layer<a class="hash-link" href="#infra-layer" title="Direct link to heading">â€‹</a></h3><p>This is a layer where the data contracts are implemented.
Things like ORM&#x27;s and Email services implementations live here.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="what-this-layer-should-do-3">What this layer should do?<a class="hash-link" href="#what-this-layer-should-do-3" title="Direct link to heading">â€‹</a></h4><ul><li>Implement contracts defined by the Data layer</li><li>Integrate with externa services like Database, Email, Logging, Push.</li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="patterns-you-will-find-here-1">Patterns you will find here<a class="hash-link" href="#patterns-you-will-find-here-1" title="Direct link to heading">â€‹</a></h4><ul><li>Data Mapper</li><li>Repository</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="main-layer">Main layer<a class="hash-link" href="#main-layer" title="Direct link to heading">â€‹</a></h3><p>This is the dirtiest layer of our whole software.</p><p>It&#x27;s the only layer that know every implementation of every contract from every layer.</p><p>This is our Composition Root.</p><p>This can make magical things like swapping what service is being used to send emails or change the database implementation.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="what-this-layer-should-do-4">What this layer should do?<a class="hash-link" href="#what-this-layer-should-do-4" title="Direct link to heading">â€‹</a></h4><ul><li>Define what implementation to use for each contract</li><li>Compose every component of our software</li><li>Instantiate every class needed</li><li>Take care of all the components lifecycles</li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="patterns-you-will-find-here-2">Patterns you will find here<a class="hash-link" href="#patterns-you-will-find-here-2" title="Direct link to heading">â€‹</a></h4><ul><li>Factory</li><li>Composition Root</li><li>Dependency Injection</li><li>IoC Container</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/otaviotech/ts-monorepo/tree/main/packages/docs/docs/Packages/server/architecture.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Packages/server/tools"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Tools</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#is-it-overkill" class="table-of-contents__link toc-highlight">Is it overkill?</a></li><li><a href="#why-is-it-an-overkill" class="table-of-contents__link toc-highlight">Why is it an overkill?</a></li><li><a href="#why-is-it-not-an-overkill" class="table-of-contents__link toc-highlight">Why is it NOT an overkill?</a></li></ul></li><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a><ul><li><a href="#typescript" class="table-of-contents__link toc-highlight">TypeScript</a></li></ul></li><li><a href="#folder-structure" class="table-of-contents__link toc-highlight">Folder Structure</a></li><li><a href="#layers" class="table-of-contents__link toc-highlight">Layers</a><ul><li><a href="#presentation-layer" class="table-of-contents__link toc-highlight">Presentation layer</a></li><li><a href="#domain-layer" class="table-of-contents__link toc-highlight">Domain layer</a></li><li><a href="#data-layer" class="table-of-contents__link toc-highlight">Data layer</a></li><li><a href="#infra-layer" class="table-of-contents__link toc-highlight">Infra layer</a></li><li><a href="#main-layer" class="table-of-contents__link toc-highlight">Main layer</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Viotech, Inc. Built in Brazil with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.94560e49.js"></script>
<script src="/assets/js/main.2e161683.js"></script>
</body>
</html>